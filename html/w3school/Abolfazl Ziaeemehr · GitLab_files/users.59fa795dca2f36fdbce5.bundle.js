webpackJsonp(["users"],{"./users/activity_calendar.js":function(t,e,a){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){var e=new Date,a=0-e.getTimezoneOffset(),n=t/60;return e.setMinutes(e.getMinutes()-a+n),e}function r(t){var e=t.date,a=t.count,n=new Date(e),i=gl.utils.getDayName(n),r=n.format("mmm d, yyyy"),s="No contributions";return a>0&&(s=a+" contribution"+(a>1?"s":"")),s+"<br />"+i+" "+r}var s=a("../../../node_modules/underscore/underscore.js"),o=a.n(s),c=a("../../../node_modules/d3/d3.js"),l=a.n(c),u=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),d=function(){return l.a.scale.linear().range(["#acd5f2","#254e77"]).domain([0,3])},h=function(){function e(a,r,s){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this.calendarActivitiesPath=s,this.clickDay=this.clickDay.bind(this),this.currentSelectedDate="",this.daySpace=1,this.daySize=15,this.daySizeWithSpace=this.daySize+2*this.daySpace,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.months=[],this.timestampsTmp=[];var c=0,l=i(o);l.setHours(0,0,0,0,0);var u=new Date(l);u.setFullYear(l.getFullYear()-1);for(var h=gl.utils.getDayDifference(u,l),f=0;f<=h;f+=1){var y=new Date(u);y.setDate(y.getDate()+f);var p=y.getDay(),v=r[y.format("yyyy-mm-dd")]||0;(0===p&&0!==f||0===f)&&(this.timestampsTmp.push([]),c+=1);this.timestampsTmp[c-1].push({count:v,date:y,day:p})}this.colorKey=d(),this.color=this.initColor(),this.svg=this.renderSvg(a,c),this.renderDays(),this.renderMonths(),this.renderDayTitles(),this.renderKey(),t(a+" .js-tooltip").tooltip({html:!0})}return u(e,[{key:"getExtraWidthPadding",value:function(t){var e=0;return this.timestampsTmp[t-1][0].date.getMonth()!==this.timestampsTmp[t-2][0].date.getMonth()&&(e=3),e}},{key:"renderSvg",value:function(t,e){var a=(e+1)*this.daySizeWithSpace+this.getExtraWidthPadding(e);return l.a.select(t).append("svg").attr("width",a).attr("height",167).attr("class","contrib-calendar")}},{key:"renderDays",value:function(){var t=this;this.svg.selectAll("g").data(this.timestampsTmp).enter().append("g").attr("transform",function(e,a){return o.a.each(e,function(e,n){if(0===n&&0===e.day){var i=e.date.getMonth(),r=t.daySizeWithSpace*a+1+t.daySizeWithSpace,s=o.a.last(t.months);(null==s||i!==s.month&&r-t.daySizeWithSpace!==s.x)&&t.months.push({month:i,x:r})}}),"translate("+(t.daySizeWithSpace*a+1+t.daySizeWithSpace)+", 18)"}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x","0").attr("y",function(e){return t.daySizeWithSpace*e.day}).attr("width",this.daySize).attr("height",this.daySize).attr("fill",function(e){return 0!==e.count?t.color(Math.min(e.count,40)):"#ededed"}).attr("title",function(t){return r(t)}).attr("class","user-contrib-cell js-tooltip").attr("data-container","body").on("click",this.clickDay)}},{key:"renderDayTitles",value:function(){var t=[{text:"M",y:29+1*this.daySizeWithSpace},{text:"W",y:29+3*this.daySizeWithSpace},{text:"F",y:29+5*this.daySizeWithSpace}];this.svg.append("g").selectAll("text").data(t).enter().append("text").attr("text-anchor","middle").attr("x",8).attr("y",function(t){return t.y}).text(function(t){return t.text}).attr("class","user-contrib-text")}},{key:"renderMonths",value:function(){var t=this;this.svg.append("g").attr("direction","ltr").selectAll("text").data(this.months).enter().append("text").attr("x",function(t){return t.x}).attr("y",10).attr("class","user-contrib-text").text(function(e){return t.monthNames[e.month]})}},{key:"renderKey",value:function(){var t=this,e=["no contributions","1-9 contributions","10-19 contributions","20-29 contributions","30+ contributions"],a=["#ededed",this.colorKey(0),this.colorKey(1),this.colorKey(2),this.colorKey(3)];this.svg.append("g").attr("transform","translate(18, "+(8*this.daySizeWithSpace+16)+")").selectAll("rect").data(a).enter().append("rect").attr("width",this.daySize).attr("height",this.daySize).attr("x",function(e,a){return t.daySizeWithSpace*a}).attr("y",0).attr("fill",function(t){return t}).attr("class","js-tooltip").attr("title",function(t,a){return e[a]}).attr("data-container","body")}},{key:"initColor",value:function(){var t=["#ededed",this.colorKey(0),this.colorKey(1),this.colorKey(2),this.colorKey(3)];return l.a.scale.threshold().domain([0,10,20,30]).range(t)}},{key:"clickDay",value:function(e){if(this.currentSelectedDate!==e.date){this.currentSelectedDate=e.date;var a=[this.currentSelectedDate.getFullYear(),this.currentSelectedDate.getMonth()+1,this.currentSelectedDate.getDate()].join("-");t.ajax({url:this.calendarActivitiesPath,data:{date:a},cache:!1,dataType:"html",beforeSend:function(){return t(".user-calendar-activities").html('\n  <div class="text-center">\n    <i class="fa fa-spinner fa-spin user-calendar-activities-loading"></i>\n  </div>\n')},success:function(e){return t(".user-calendar-activities").html(e)}})}else this.currentSelectedDate="",t(".user-calendar-activities").html("")}}]),e}();e.a=h}).call(e,a("../../../node_modules/jquery/dist/jquery.js"))},"./users/index.js":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(e){var a=this;t(".profile-groups-avatars").tooltip({placement:"top"}),new r.a({parentEl:".user-profile",action:e}),t(".hide-project-limit-message").on("click",function(e){e.preventDefault(),i.a.set("hide_project_limit_message","false"),t(a).parents(".project-limit-message").remove()})}var n=a("../../../node_modules/js-cookie/src/js.cookie.js"),i=a.n(n),r=a("./users/user_tabs.js");document.addEventListener("DOMContentLoaded",function(){e(t("body").attr("data-page").split(":")[1])})}.call(e,a("../../../node_modules/jquery/dist/jquery.js"))},"./users/user_tabs.js":function(t,e,a){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=a("./users/activity_calendar.js"),r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=function(){function e(a){var i=this,r=a.defaultAction,s=a.action,o=a.parentEl;n(this,e),this.loaded={},this.defaultAction=r||"activity",this.action=s||this.defaultAction,this.$parentEl=t(o)||t(document),this.windowLocation=window.location,this.$parentEl.find(".nav-links a").each(function(e,a){i.loaded[t(a).attr("data-action")]=!1}),this.actions=Object.keys(this.loaded),this.bindEvents(),"show"===this.action&&(this.action=this.defaultAction),this.activateTab(this.action)}return r(e,[{key:"bindEvents",value:function(){var t=this;this.$parentEl.off("shown.bs.tab",'.nav-links a[data-toggle="tab"]').on("shown.bs.tab",'.nav-links a[data-toggle="tab"]',function(e){return t.tabShown(e)}).on("click",".gl-pagination a",function(e){return t.changeProjectsPage(e)})}},{key:"changeProjectsPage",value:function(e){e.preventDefault(),t(".tab-pane.active").empty();var a=t(e.target).attr("href");this.loadTab(this.getCurrentAction(),a)}},{key:"tabShown",value:function(e){var a=t(e.target),n=a.data("action"),i=a.attr("href"),r=a.data("endpoint");return this.setTab(n,r),this.setCurrentAction(i)}},{key:"activateTab",value:function(t){return this.$parentEl.find(".nav-links .js-"+t+"-tab a").tab("show")}},{key:"setTab",value:function(t,e){if(!this.loaded[t]){"activity"===t&&this.loadActivities();["groups","contributed","projects","snippets"].indexOf(t)>-1&&this.loadTab(t,e)}}},{key:"loadTab",value:function(e,a){var n=this;return t.ajax({beforeSend:function(){return n.toggleLoading(!0)},complete:function(){return n.toggleLoading(!1)},dataType:"json",url:a,success:function(a){var i="div#"+e;n.$parentEl.find(i).html(a.html),n.loaded[e]=!0,gl.utils.localTimeAgo(t(".js-timeago",i))}})}},{key:"loadActivities",value:function(){if(!this.loaded.activity){var e=this.$parentEl.find(".user-calendar"),a=e.data("calendarPath"),n=e.data("calendarActivitiesPath"),r=e.data("utcOffset"),s="UTC";0!==r&&(s="UTC"+(r>0?"+":"")+r/3600),t.ajax({dataType:"json",url:a,success:function(t){e.html('\n  <div class="clearfix calendar">\n    <div class="js-contrib-calendar"></div>\n    <div class="calendar-hint">\n      Summary of issues, merge requests, push events, and comments\n    </div>\n  </div>\n'),e.find(".calendar-hint").append("(Timezone: "+s+")"),new i.a(".js-contrib-calendar",t,n,r)}}),new gl.Activities,this.loaded.activity=!0}}},{key:"toggleLoading",value:function(t){return this.$parentEl.find(".loading-status .loading").toggle(t)}},{key:"setCurrentAction",value:function(t){var e=t;return e=e.replace(/\/+$/,""),e+=this.windowLocation.search+this.windowLocation.hash,history.replaceState({url:e},document.title,e),e}},{key:"getCurrentAction",value:function(){return this.$parentEl.find(".nav-links .active a").data("action")}}]),e}();e.a=s}).call(e,a("../../../node_modules/jquery/dist/jquery.js"))}},["./users/index.js"]);
//# sourceMappingURL=users.59fa795dca2f36fdbce5.bundle.js.map